<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Ashkan Mirzaee" />


<title>Introduction of high-performance computing (HPC)</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/yeti.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<!-- description -->
<meta name="description" content="I'm Ashkan Mirzaee, doctoral student at the University of Missouri. My website includes my research in OR and Bioenergy, tutorials for R, Python and High-Performance Computing">

<!-- google.com -->
<meta name="google-site-verification" content="lD_nifpQ-CA6LaDwxYJbe5bq0oa6Ir0Ax-txvtdP51E" />

<!-- bing.com -->
<meta name="msvalidate.01" content="89BCD3FF42B6E9FE48E0C8365767D11B" />

<!-- JSON-LD markup generated by Google Structured Data Markup Helper. -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "Ashkan Mirzaee",
  "url": "http://ashki23.github.io/",
  "sameAs": [
    "http://www.facebook.com/ashkan.mirzaee",
    "http://www.linkedin.com/in/ashkan-mirzaee/",
    "http://github.com/ashki23"
  ]
}
</script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-132464297-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-132464297-1');
</script>

<!-- favicon -->
<link rel="icon" href="images/AM.jpg">


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' || rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 45px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 50px;
  margin-top: -50px;
}
.section h2 {
  padding-top: 50px;
  margin-top: -50px;
}
.section h3 {
  padding-top: 50px;
  margin-top: -50px;
}
.section h4 {
  padding-top: 50px;
  margin-top: -50px;
}
.section h5 {
  padding-top: 50px;
  margin-top: -50px;
}
.section h6 {
  padding-top: 50px;
  margin-top: -50px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->



<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Ashkan Mirzaee</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="tutorials.html">Tutorials</a>
</li>
<li>
  <a href="research.html">Research</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="contact.html">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="http://github.com/ashki23">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://www.linkedin.com/in/ashkan-mirzaee/">
    <span class="fa fa-linkedin fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<script>
$(document).on('click',function() {
  $('.collapse').collapse('hide');
})
</script>

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Introduction of high-performance computing (HPC)</h1>
<h4 class="author">Ashkan Mirzaee</h4>

</div>


<style>
h4.author {
  display: none;
}
</style>
<p>Computation is all about the limitation. If we have enough time and resources we might find the answer. But the problem arise when time or resources are limited. A supercomputer or cluster with high level of performance could let us to tackle the problem. The following are some great workshops about HPC:</p>
<ul>
<li><a href="https://hpc-carpentry.github.io/hpc-intro/">Introduction to High-Performance Computing</a></li>
<li><a href="https://hpc-carpentry.github.io/hpc-shell/">Introduction to using the shell in a High-Performance Computing context</a></li>
</ul>
<p>Using HPC systems often involves the use of a Shell through a command line interface which is necessary for this topic (see <a href="shell.html">here</a>).</p>
<p>This tutorial provides a list of basic scheduling commands, submitting jobs, methods of transferring files from local computers, and installing software on clusters.</p>
<hr />
<div id="scheduling-jobs" class="section level2">
<h2>Scheduling jobs</h2>
<p>On an HPC system, we need a scheduler to manage how jobs running on a cluster. One of the most common schedulers is SLURM. The following are some the most helpful SLURM commands:</p>
<pre class="txt"><code>sinfo: shows info about the nodes
sacctmgr show qos normal: show max number of jobs that user can run in parallel 
sjstat: display statistics of jobs under control of SLURM
sbatch: submit a job to the scheduler
srun: run parallel jobs
squeue: check on the jobs status
squeue -u &lt;username&gt;: check on a user&#39;s job status
watch -n 60 squeue -u yourUsername: check on the user status every 60 sec, ctrl + c to stop
sacct: displays accounting data for all jobs and job steps in the SLURM job accounting log
scancel JOBID: cancel the job with JOBID
scancel -u &lt;username&gt;: cancel all the user jobs</code></pre>
<p>To see more details about these commands use <code>&lt;command&gt; --help</code>.</p>
<p>Let’s connect to the cluster through <code>ssh user@server</code>, and do some practices. For example, use <code>nano example-job.sh</code> to make a job file including:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="co">#SBATCH --nodes=1</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#SBATCH --cpus=2 </span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#SBATCH --mem=4g </span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">#SBATCH --time 0:5:00 </span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#SBATCH --job-name=NewJobName</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#SBATCH --mail-user=your@email.com</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="co">#SBATCH --mail-type=</span><span class="re">END</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="bu">echo</span> <span class="st">&#39;This script is running on:&#39;</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="fu">hostname</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="fu">sleep</span> 120</a></code></pre></div>
<p>Special characters <code>#!</code> (shebang) at the beginning of scripts specifies what program should be used (i.e. <code>/bin/bash</code> or <code>/usr/bin/python3</code>). SLURM uses <code>#SBATCH</code> special comment to denote special scheduler-specific options. There are several options that you may find by <code>sbatch --help</code>. For example, the above file uses 1 nodes, 2 CPUs, 4 gigabytes of memory, 5 minutes of walltime, gives a new name to the job, and let you know when it is ended. Now we can submit the job file by <code>sbatch example-job.sh</code>. You may use <code>squeue -u USER</code> or <code>sacct -u USER</code> to check the job file status, and use <code>scancel JOBID</code> to cancel the job.</p>
<p>To run a single command, we can use <code>srun</code>. For instance, <code>srun -c 2 echo &quot;This job will use 2 CPUs.&quot;</code> submits a job and allocates 2 CPUs. Also, we can use <code>srun</code> to open a program in an interaction mode. For example, <code>srun --pty bash</code> will open a Bash shell in a computation node.</p>
<p><strong>Note</strong>: in general, when we connect to a cluster we will go to a node, called <strong>login node</strong>, which is not meant to do heavy computational tasks. So, to do your computations in a proper way, you should always use either <strong><code>sbatch</code></strong> or <strong><code>srun</code></strong>.</p>
<p>Usually there are many <strong>modules</strong> available on the clusters. To find and load these modules use:</p>
<pre class="txt"><code>module avail: shows all avaliable madules (programs) in the cluster
module load &lt;name&gt;: to load a module ex. module load R or python
module list: shows list of the loaded modules
module unload &lt;name&gt;: to unload a module
module purge: to unload all modules</code></pre>
<p>To create a template <code>sbatch</code> job file, use the following steps:</p>
<ol style="list-style-type: decimal">
<li>generate a file including all codes that you want to run in the cluster</li>
<li>generate a Bash file including all modules that are required for your job (<code>environment.sh</code>)</li>
<li>generate a Bash file to call steps 1 and 2 including all <code>#SBATCH</code> options (<code>job_file.sh</code>)</li>
<li>use <code>sbatch</code>to run the generated file in step 3</li>
</ol>
<p>For example let’s run a python code, run <code>nano test-hello.py</code> and copy the following:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co">#!/usr/bin/python3</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="ex">print</span>(<span class="st">&quot;Hello world&quot;</span>)</a></code></pre></div>
<p>Then use <code>nano environment.sh</code> to create the environment file including:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="ex">module</span> load miniconda3</a></code></pre></div>
<p>Then use <code>nano job-test-hello.sh</code> to make the job file by:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">#SBATCH --job-name=TestHello</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#SBATCH --nodes=1</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#SBATCH --partition hpc0</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#SBATCH --mem 1g</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="bu">source</span> ./envrionment.sh</a>
<a class="sourceLine" id="cb6-9" data-line-number="9"></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co">## List of loaded modules</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="ex">module</span> list</a>
<a class="sourceLine" id="cb6-12" data-line-number="12"></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="bu">echo</span> === <span class="va">$(</span><span class="fu">hostname</span><span class="va">)</span> <span class="va">$(</span><span class="fu">date</span><span class="va">)</span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"></a>
<a class="sourceLine" id="cb6-15" data-line-number="15"><span class="ex">srun</span> python3 ./test-hello.py</a>
<a class="sourceLine" id="cb6-16" data-line-number="16"></a>
<a class="sourceLine" id="cb6-17" data-line-number="17"><span class="bu">echo</span> === <span class="va">$(</span><span class="fu">date</span><span class="va">)</span></a></code></pre></div>
<p>Now, use <code>sbatch job-test-hello.sh</code> to send the job for running.</p>
</div>
<div id="transferring-files" class="section level2">
<h2>Transferring files</h2>
<p><strong>Secure copy (scp)</strong></p>
<p>We can use secure copy or <code>scp</code> to transfer files from your local computer to the cluster and vice versa. For example, let’s transfer <code>code_example.py</code> from <code>temp/</code> directory on the <code>clark.edu</code> cluster to <code>Documents/</code> directory in your local computer when we are using the local computer. For this we can use:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="bu">cd</span> ~/Documents</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="fu">scp</span> user@clark.edu:/temp/code_example.py .</a></code></pre></div>
<p>The <code>.</code> at the end of the code says, paste with the same name of the source file. To do the reverse task with:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="bu">cd</span> ~/Documents</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="fu">scp</span> code_example.py user@clark.edu:/temp/.</a></code></pre></div>
<p>To recursively copy a directory (with all files in the directory), we just need to add the -r (recursive) flag. For example to download temp folder use:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="bu">cd</span> ~/Documents</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="fu">scp</span> -r user@clark.edu:/temp .</a></code></pre></div>
<p><strong>SSH file transfer protocol (sftp)</strong></p>
<p>The other method to transfer data between your local machine and a cluster is using SSH file transfer protocol or <code>sftp</code>. In <code>sftp</code> we can use tab completion for finding files very easily. You may connect to a cluster through <code>sftp</code> very similar to <code>ssh</code> by running <code>sftp username@server</code>.</p>
<p>You can use most of the Bash commands when using <code>sftp</code> and at the same time access to both cluster and local computer. Usually you can apply the bash commands in you local system by adding <code>l</code> to the beginning of the commands. For example:</p>
<pre class="txt"><code>pwd: print working directory on the cluster
lpwd: print working directtory on the local computer
cd: chnage directory on the cluster
lcd: change directtory on the local computer</code></pre>
<p>Use <strong><code>put</code></strong> to upload and <strong><code>get</code></strong> to download a file.</p>
<p><strong>Wget</strong></p>
<p>To get data from web, also, you can use <code>wget</code> command to download whatever you want on the cluster.</p>
</div>
<div id="software-installation" class="section level2">
<h2>Software installation</h2>
<p>When you login to a cluster as a user you will only have permission to change user level files (home directory <code>cd ~</code> and higher). So, in this case you never be able to install/update software that are located in the root directory (<code>cd /</code>).</p>
<p>Note that you can find the location of software by loading a module and using <code>which</code> command, for example, <code>module load miniconda3</code> and then run <code>which python3</code>. For instance, a directory in the root directory could include <code>software</code> and <code>spack</code> directories for allocating software. Many clusters use <a href="https://spack.readthedocs.io/en/latest/">Spack</a> to built required environments and install software but some software are not in the Spack inventory that should be installed manually (in our example <code>software</code> directory includes them).</p>
<p>As a user of a cluster you have several ways to build your own system and install and update software that you need:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Python</strong>: If you only need several Python packages probably the easiest way is making a virtual environment by <code>venv</code> module in Python3. After that you will be able to use <code>pip</code> package manager to install packages that you want. See <a href="">here</a> to learn more.</p></li>
<li><p><strong>Miniconda</strong>: Miniconda, a light version of Anaconda, let you install many software including Python, R and their packages. You can try <code>module load anaconda3</code> to load the module and then use <code>conda</code> to create a virtual environment and install software and packages. See <a href="">here</a> to learn more. Note that if your cluster does not include <code>miniconda3</code> you may use the third option to install it and the use <code>conda</code>.</p></li>
<li><p><strong>Spack</strong>: it gives you more freedom to install software and packages that are available in Spack (see <a href="https://spack.readthedocs.io/en/latest/package_list.html#gurobi">here</a>. To use Spack you need to install Spack first on you local directories (which is above <code>cd ~</code>) and then use <code>spack</code> to install and load packages. You may learn more about Spack <a href="">here</a>. Note that this way might take long time to install Spack and the modules, so, first make sure the second option could not install your requirements.</p></li>
<li><p><strong>Manually</strong>: Still there are many software that are not in Conda or Spack. You should follow the software instruction to install them. Make sure see (if exist) the ReadMe file, <code>cat ReadMe</code>, and configure options, <code>./configure --help</code>, in the installation directory. Since you are not using root directory, make sure use the right directory that all the dependencies already installed (i.e <code>./configure --prefix=${LOCAL}</code> (define LOCAL first)). This method could be the hardest way, so, first make sure Conda and Spack could not help you. Note that software names might be slightly different in Conda or Spack so have a look on all the names that are close.</p></li>
</ol>
</div>


<br />
<!-- facebook -->
<div class="fb-comments" data-href="https://ashki23.github.io/" data-width="100%" data-numposts="50"></div>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = 'https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.2&appId=382934575805246';
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<!-- footer -->
<br />
<div class="footer">
  <span>Sourcecode licensed under <a href="https://www.gnu.org/licenses/gpl-3.0.en.html">GPL-3.0</a></span>
  <span>|</span>
  <span>Documentation licensed under <a href="https://creativecommons.org/licenses/by-sa/3.0/">CC BY-SA 3.0</a></span>
  <br />
  <span>Copyright 2018-2019, Ashkan Mirzaee</span>
</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
